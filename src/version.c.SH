#!/bin/sh
spitshell=cat
package=IRC

echo "Extracting $package/src/version.c..."

if test -r version.c.last
then
	generation=`sed -n 's/^char \*generation = \"\(.*\)\";/\1/p' < version.c.last`
if test ! "$generation" ; then generation=0; fi
else
	generation=0
fi

generation=`expr $generation + 1`

uname=`uname -a`

creation=`date | \
awk '{if (NF == 6) \
{ print $1 " "  $2 " " $3 " "  $6 " at " $4 " " $5 } \
else \
{ print $1 " "  $2 " " $3 " " $7 " at " $4 " " $5 " " $6 }}'`

$spitshell >version.c <<!SUB!THIS!
/*
 *   IRC - Internet Relay Chat, src/version.c
 *   Copyright (C) 1990 Chelsea Ashley Dyerman
 *
 *   This program is free software; you can redistribute it and/or modify
 *   it under the terms of the GNU General Public License as published by
 *   the Free Software Foundation; either version 1, or (at your option)
 *   any later version.
 *
 *   This program is distributed in the hope that it will be useful,
 *   but WITHOUT ANY WARRANTY; without even the implied warranty of
 *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *   GNU General Public License for more details.
 *
 *   You should have received a copy of the GNU General Public License
 *   along with this program; if not, write to the Free Software
 *   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */

/*
 * This file is generated by version.c.SH. Any changes made will go away.
 */

#include "struct.h"
#include "patchlevel.h"

char *generation = "$generation";
char *creation = "$creation";
char version[128];

char *infotext[] =
    {
	 "$package --",
	 "Based on the original code written by Jarkko Oikarinen",
	 "Copyright 1988, 1989, 1990, 1991 University of Oulu, Computing Center",
	 "",
	 "This program is free software; you can redistribute it and/or",
	 "modify it under the terms of the GNU General Public License as",
	 "published by the Free Software Foundation; either version 1, or",
	 "(at your option) any later version.",
	 "",
	 "Send bug reports to dalnet-src@dal.net",
	 "",
	 "The following people compose the bahamut team and actively",
	 "maintain the bahamut codebase:",
	 "lucas               Lucas Madar         lucas@negaverse.org",
	 "Epiphani            Aaron Wiebe         epiphani@dal.net",
	 "Raistlin_Majere     Jason Slagle        raistlin@bahamut.net",
	 "",
	 "The following people have contributed code, or support",
	 "to the bahamut team:",
	 "aClient             Diane Bruce         db@koruna.varner.com",
	 "Dakal               David Knepper       dakal@dal.net",
	 "Dalvenjah           Sven Nielsen        dalvenjah@dal.net",
	 "MSofty              Mark Salerno        msofty@dal.net",
	 "Rakarra             Ian Westcott        rakarra@dal.net",
	 "sedition            David Parton        sedition@dal.net",
	 "White_Dragon        Chip Norkus         wd@dal.net",
         "xPsycho             Ryan Smith          xpsycho@dal.net",
	 "srd                 Sean McKay          srd@dal.net",
	 "",
	 "The following people have contributed ideas or testing to the",
	 "bahamut project:",
	 "driz                David Friedman      driz@dal.net",
	 "habit               Melinda Thompson    habit@dal.net",
	 "Kevin               Kevin Turner        kevin@dal.net",
	 "drone               Mike Wilson         dalnetdrone@yahoo.com",
	 "",
	 "",
	 "Developers and Contributors for previous versions:",
	 "Chris A. Bongaarts  Chris Behrens       Diane Bruce",
	 "Johannes Erdfelt    Roger Espel Llima   Jon Lusky",
	 "Michael Pearce      Brian Kraemer       Joan Touzet",
	 "Chris Portman       Keith Fralick       Sam Noble",
	 "Taner Halicioglu    Chris Behrens       Darren Reed",
	 "Markku Savela       Greg Lindahl        Jarkko Oikarinen",
	 "Armin Gruner        Matthew Green       Chuck Kane",
	 "Matt Lyle           Vesa Ruokonen       Nicolas PIOCH",
	 "Stellan Klebom      Dan Goodwin         Mike Bolotski",
	 "Ian Frechette       Markku Jarvinen     Kimmo Suominen",
	 "Jeff Trim           Vijay Subramaniam   Karl Kleinpaste",
	 "Bill Wisner         Tom Davis           Hugo Calendar",
	 "Tom Hopkins         Stephen van den Berg",
	 "Bo Adler            Michael Sandrof     Jon Solomon",
	 "Jan Peterson        Helen Rose          Paul Graham",
	 "",
	 "Thanks also goes to those persons not mentioned here who have added",
	 "their advice, opinions, and code to IRC.",
	 "Thanks also to those who provide the kind sys admins who let me and",
	 "others continue to develop IRC.",
	 "",
#if defined(INET6)
	 "INET6 code:",
	 "void/vjt             Marcello Barnaba  void@azzurra.org",
	 "tsk                  Fabrizio Lanotte   tsk@azzurra.org",
	 "Thanks:",
	 "monas                Aidas Kasparas     monas@users.sf.net",
	 "INET6 code is available on: http://devel.azzurra.org",
	 "",
#endif
#if defined(USE_SSL)
	 "SSL code:",
	 "void/vjt             Marcello Barnaba   void@azzurra.org",
	 "SSL testing:",
	 "C|ty_Hunter, Intel, PaDrino, Progeny, tsk [thanks !]",
	 "This server uses the OpenSSL library: http://www.openssl.org",
	 "SSL code is available on: http://devel.azzurra.org",
	 "",
#endif
#if defined(AZZURRA)
	 "Azzurra code:",
	 "void/vjt             Marcello Barnaba      void@azzurra.org",
	 "tsk                  Fabrizio Lanotte       tsk@azzurra.org",
	 "int                  Daniel Dubois          int@azzurra.org",
	 "Thanks: #phrack.it :: awgn, mainman, *",
	 "        #it-opers  :: debiAn, Gastaman, Shaka, Wolf7, Mav, *",
	 "        #sniffo    :: WuhrerHouse, nextime, kazam, tsk, jx, *",
	 "Azzurra code is available on: http://devel.azzurra.org",
	 "",
#endif
#if defined(INET6) || defined(USE_SSL) || defined(AZZURRA)
	 " _____________________________________ ",
	 "< This bahamut has Super Cow Powers ! >",
	 " ------------------------------------- ",
	 "        \\\\   ^__^",
	 "         \\\\  (oo)\\\\_______",
	 "            (__)\\\\       )\\\\/\\\\",
	 "                ||----w |",
	 "                ||     ||",
	 "",
#endif
	 0,
};
!SUB!THIS!
